<!DOCTYPE html>
<!-- saved from url=(0062)file:///C:/Users/jlluc/Downloads/villa-booking-firebase_1.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Villa Caratti Booking System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .floor-plan-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 20px;
        }

        .upload-btn {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin-bottom: 15px;
            transition: background 0.3s;
        }

        .upload-btn:hover {
            background: #5568d3;
        }

        #floorPlanDisplay {
            margin-top: 20px;
            position: relative;
        }

        #floorPlanDisplay img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .remove-plan-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff4757;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .bedrooms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .bedroom-card {
            background: #f0f4ff;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #667eea;
        }

        .bedroom-card h3 {
            color: #667eea;
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        .bedroom-card p {
            color: #666;
            font-size: 0.9em;
        }

        .booking-form {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            border: 2px solid #e0e0e0;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .date-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .submit-btn {
            background: #10ac84;
            color: white;
            padding: 14px 32px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s;
        }

        .submit-btn:hover {
            background: #0e9670;
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .calendar-grid {
            overflow-x: auto;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }

        th, td {
            padding: 12px;
            text-align: center;
            border: 1px solid #e0e0e0;
        }

        th {
            background: #667eea;
            color: white;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        .date-header {
            background: #f0f4ff;
            font-weight: 600;
            color: #667eea;
        }

        .bedroom-label {
            font-weight: 600;
            background: #f0f4ff;
            color: #667eea;
            text-align: left;
            padding-left: 15px;
        }

        .booking-cell {
            background: #10ac84;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .booking-cell:hover {
            background: #0e9670;
        }

        .empty-cell {
            background: #f8f9fa;
        }

        .bookings-list {
            display: grid;
            gap: 15px;
        }

        .booking-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #667eea;
            display: grid;
            grid-template-columns: 1fr auto;
            align-items: center;
            gap: 15px;
        }

        .booking-info h3 {
            color: #333;
            margin-bottom: 8px;
        }

        .booking-info p {
            color: #666;
            margin-bottom: 4px;
        }

        .delete-booking-btn {
            background: #ff4757;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }

        .delete-booking-btn:hover {
            background: #ff3838;
        }

        .error {
            background: #ff4757;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .success {
            background: #10ac84;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .info-text {
            color: #999;
            text-align: center;
            padding: 40px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #667eea;
            font-size: 1.2em;
        }

        .sync-status {
            background: #f0f4ff;
            padding: 12px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sync-status-text {
            color: #667eea;
            font-weight: 600;
        }

        .refresh-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }

        .refresh-btn:hover {
            background: #5568d3;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèõÔ∏è Villa Caratti Booking System</h1>
            <p>July 18-31, 2025 | Shared Family Calendar</p>
        </div>

        <div class="content">
            <div id="message"></div>
            
            <div class="sync-status">
                <span class="sync-status-text" id="syncStatus">‚úì Synced - Real-time updates enabled</span>
                <button class="refresh-btn" onclick="location.reload()">üîÑ Refresh</button>
            </div>

            <!-- Floor Plan -->
            <div class="section">
                <h2>üèõÔ∏è Villa Floor Plan</h2>
                <div class="floor-plan-section">
                    <label for="floorPlanUpload" class="upload-btn">
                        üìé Upload Floor Plan
                    </label>
                    <input type="file" id="floorPlanUpload" accept="image/*,.pdf" style="display: none;">
                    <div id="floorPlanDisplay">
                        <p class="info-text">Upload a floor plan to help guests choose their rooms</p>
                    </div>
                </div>
            </div>

            <!-- Bedrooms -->
            <div class="section">
                <h2>üõèÔ∏è Bedrooms</h2>
                <div class="bedrooms-grid" id="bedroomsList">
                <div class="bedroom-card">
                    <h3>Bedroom 1</h3>
                    <p>Lake Suite - Double, En-suite</p>
                </div>
            
                <div class="bedroom-card">
                    <h3>Bedroom 2</h3>
                    <p>Lake Suite - Double, En-suite</p>
                </div>
            
                <div class="bedroom-card">
                    <h3>Bedroom 3</h3>
                    <p>Lake Suite - Double, Shared bathroom</p>
                </div>
            
                <div class="bedroom-card">
                    <h3>Bedroom 4</h3>
                    <p>Lake Suite - Twin beds, Shared bathroom</p>
                </div>
            
                <div class="bedroom-card">
                    <h3>Bedroom 5</h3>
                    <p>Sky Suite - Double, En-suite</p>
                </div>
            
                <div class="bedroom-card">
                    <h3>Bedroom 6</h3>
                    <p>Sky Suite - Double, En-suite</p>
                </div>
            
                <div class="bedroom-card">
                    <h3>Bedroom 7</h3>
                    <p>Sky Suite - Double, En-suite</p>
                </div>
            
                <div class="bedroom-card">
                    <h3>Bedroom 8</h3>
                    <p>Sky Suite - Single, En-suite</p>
                </div>
            
                <div class="bedroom-card">
                    <h3>Bedroom 9</h3>
                    <p>Sky Suite - Single, En-suite</p>
                </div>
            </div>
            </div>

            <!-- New Booking Form -->
            <div class="section">
                <h2>üìÖ New Booking</h2>
                <div class="booking-form">
                    <div class="form-group">
                        <label>Guest Name(s)</label>
                        <input type="text" id="guestName" placeholder="e.g., John &amp; Sarah Smith" required="">
                    </div>
                    <div class="form-group">
                        <label>Bedroom</label>
                        <select id="bedroomSelect" required=""><option value="">Select a bedroom</option><option value="1">Bedroom 1 - Lake Suite - Double, En-suite</option><option value="2">Bedroom 2 - Lake Suite - Double, En-suite</option><option value="3">Bedroom 3 - Lake Suite - Double, Shared bathroom</option><option value="4">Bedroom 4 - Lake Suite - Twin beds, Shared bathroom</option><option value="5">Bedroom 5 - Sky Suite - Double, En-suite</option><option value="6">Bedroom 6 - Sky Suite - Double, En-suite</option><option value="7">Bedroom 7 - Sky Suite - Double, En-suite</option><option value="8">Bedroom 8 - Sky Suite - Single, En-suite</option><option value="9">Bedroom 9 - Sky Suite - Single, En-suite</option></select>
                    </div>
                    <div class="date-inputs">
                        <div class="form-group">
                            <label>Check-In Date</label>
                            <input type="date" id="checkIn" min="2025-07-18" max="2025-07-31" required="">
                        </div>
                        <div class="form-group">
                            <label>Check-Out Date</label>
                            <input type="date" id="checkOut" min="2025-07-18" max="2025-07-31" required="">
                        </div>
                    </div>
                    <button class="submit-btn" onclick="addBooking()">Add Booking</button>
                </div>
            </div>

            <!-- Calendar View -->
            <div class="section">
                <h2>üìä Calendar Overview</h2>
                <div class="calendar-grid" id="calendarGrid"><table><thead><tr><th>Bedroom</th><th class="date-header">Jul 18</th><th class="date-header">Jul 19</th><th class="date-header">Jul 20</th><th class="date-header">Jul 21</th><th class="date-header">Jul 22</th><th class="date-header">Jul 23</th><th class="date-header">Jul 24</th><th class="date-header">Jul 25</th><th class="date-header">Jul 26</th><th class="date-header">Jul 27</th><th class="date-header">Jul 28</th><th class="date-header">Jul 29</th><th class="date-header">Jul 30</th><th class="date-header">Jul 31</th></tr></thead><tbody><tr><td class="bedroom-label">Bedroom 1</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td></tr><tr><td class="bedroom-label">Bedroom 2</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td></tr><tr><td class="bedroom-label">Bedroom 3</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td></tr><tr><td class="bedroom-label">Bedroom 4</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td></tr><tr><td class="bedroom-label">Bedroom 5</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td></tr><tr><td class="bedroom-label">Bedroom 6</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td></tr><tr><td class="bedroom-label">Bedroom 7</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td></tr><tr><td class="bedroom-label">Bedroom 8</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td></tr><tr><td class="bedroom-label">Bedroom 9</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td><td class="empty-cell">‚Äî</td></tr></tbody></table></div>
            </div>

            <!-- All Bookings -->
            <div class="section">
                <h2>üìã All Bookings</h2>
                <div id="bookingsList" class="bookings-list"><p class="info-text">No bookings yet</p></div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set, get, onValue, remove } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        import { getStorage, ref as storageRef, uploadString, getDownloadURL, deleteObject } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCS8fSS-5sTLUxPVl0UzQ6RSOhv1BbZ4XM",
            authDomain: "villa-caratti-booking.firebaseapp.com",
            databaseURL: "https://villa-caratti-booking-default-rtdb.firebaseio.com",
            projectId: "villa-caratti-booking",
            storageBucket: "villa-caratti-booking.firebasestorage.app",
            messagingSenderId: "1088894150351",
            appId: "1:1088894150351:web:b8b49d44ee96ef3d5e79ba"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const storage = getStorage(app);

        const bedrooms = [
            { id: '1', name: 'Bedroom 1', details: 'Lake Suite - Double, En-suite' },
            { id: '2', name: 'Bedroom 2', details: 'Lake Suite - Double, En-suite' },
            { id: '3', name: 'Bedroom 3', details: 'Lake Suite - Double, Shared bathroom' },
            { id: '4', name: 'Bedroom 4', details: 'Lake Suite - Twin beds, Shared bathroom' },
            { id: '5', name: 'Bedroom 5', details: 'Sky Suite - Double, En-suite' },
            { id: '6', name: 'Bedroom 6', details: 'Sky Suite - Double, En-suite' },
            { id: '7', name: 'Bedroom 7', details: 'Sky Suite - Double, En-suite' },
            { id: '8', name: 'Bedroom 8', details: 'Sky Suite - Single, En-suite' },
            { id: '9', name: 'Bedroom 9', details: 'Sky Suite - Single, En-suite' }
        ];

        let bookings = [];

        function getDates() {
            const dates = [];
            for (let day = 18; day <= 31; day++) {
                dates.push(`2025-07-${day.toString().padStart(2, '0')}`);
            }
            return dates;
        }

        const dates = getDates();

        // Initialize
        async function init() {
            renderBedrooms();
            renderBedroomSelect();
            setupFloorPlanUpload();
            
            // Listen for real-time updates
            const bookingsRef = ref(database, 'bookings');
            onValue(bookingsRef, (snapshot) => {
                const data = snapshot.val();
                bookings = data ? Object.values(data) : [];
                renderCalendar();
                renderBookingsList();
                updateSyncStatus('‚úì Synced - Real-time updates enabled');
            });

            // Load floor plan
            loadFloorPlan();
        }

        function updateSyncStatus(text) {
            document.getElementById('syncStatus').textContent = text;
        }

        // Floor plan functions
        function setupFloorPlanUpload() {
            document.getElementById('floorPlanUpload').addEventListener('change', async function(e) {
                const file = e.target.files[0];
                if (!file) return;

                if (file.size > 5 * 1024 * 1024) {
                    showMessage('Floor plan file is too large. Please use a file under 5MB.', 'error');
                    return;
                }

                const reader = new FileReader();
                reader.onload = async function(event) {
                    try {
                        const dataUrl = event.target.result;
                        const floorPlanRef = storageRef(storage, 'floorPlan.jpg');
                        await uploadString(floorPlanRef, dataUrl, 'data_url');
                        await loadFloorPlan();
                        showMessage('Floor plan uploaded successfully!', 'success');
                    } catch (error) {
                        showMessage('Error uploading floor plan: ' + error.message, 'error');
                    }
                };
                reader.readAsDataURL(file);
            });
        }

        async function loadFloorPlan() {
            try {
                const floorPlanRef = storageRef(storage, 'floorPlan.jpg');
                const url = await getDownloadURL(floorPlanRef);
                displayFloorPlan(url);
            } catch (error) {
                // No floor plan yet
            }
        }

        function displayFloorPlan(url) {
            const display = document.getElementById('floorPlanDisplay');
            display.innerHTML = `
                <div style="position: relative;">
                    <img src="${url}" alt="Villa Floor Plan">
                    <button class="remove-plan-btn" onclick="window.removeFloorPlan()">Remove</button>
                </div>
            `;
        }

        window.removeFloorPlan = async function() {
            if (!confirm('Remove the floor plan?')) return;
            try {
                const floorPlanRef = storageRef(storage, 'floorPlan.jpg');
                await deleteObject(floorPlanRef);
                document.getElementById('floorPlanDisplay').innerHTML = '<p class="info-text">Upload a floor plan to help guests choose their rooms</p>';
                showMessage('Floor plan removed', 'success');
            } catch (error) {
                showMessage('Error removing floor plan: ' + error.message, 'error');
            }
        };

        // Booking functions
        window.addBooking = async function() {
            const guestName = document.getElementById('guestName').value.trim();
            const bedroomId = document.getElementById('bedroomSelect').value;
            const checkIn = document.getElementById('checkIn').value;
            const checkOut = document.getElementById('checkOut').value;

            if (!guestName || !bedroomId || !checkIn || !checkOut) {
                showMessage('Please fill in all fields', 'error');
                return;
            }

            if (checkIn >= checkOut) {
                showMessage('Check-out date must be after check-in date', 'error');
                return;
            }

            const conflict = bookings.find(b => 
                b.bedroomId === bedroomId &&
                !(checkOut <= b.checkIn || checkIn >= b.checkOut)
            );

            if (conflict) {
                showMessage('This bedroom is already booked for overlapping dates', 'error');
                return;
            }

            const bookingId = Date.now().toString();
            const booking = {
                id: bookingId,
                guestName,
                bedroomId,
                checkIn,
                checkOut
            };

            try {
                await set(ref(database, `bookings/${bookingId}`), booking);
                
                document.getElementById('guestName').value = '';
                document.getElementById('bedroomSelect').value = '';
                document.getElementById('checkIn').value = '';
                document.getElementById('checkOut').value = '';
                
                showMessage('Booking added successfully!', 'success');
            } catch (error) {
                showMessage('Error adding booking: ' + error.message, 'error');
            }
        };

        window.deleteBooking = async function(id) {
            if (!confirm('Are you sure you want to delete this booking?')) {
                return;
            }

            try {
                await remove(ref(database, `bookings/${id}`));
                showMessage('Booking deleted', 'success');
            } catch (error) {
                showMessage('Error deleting booking: ' + error.message, 'error');
            }
        };

        function renderBedrooms() {
            const container = document.getElementById('bedroomsList');
            container.innerHTML = bedrooms.map(bedroom => `
                <div class="bedroom-card">
                    <h3>${bedroom.name}</h3>
                    <p>${bedroom.details}</p>
                </div>
            `).join('');
        }

        function renderBedroomSelect() {
            const select = document.getElementById('bedroomSelect');
            select.innerHTML = '<option value="">Select a bedroom</option>' + 
                bedrooms.map(b => `<option value="${b.id}">${b.name} - ${b.details}</option>`).join('');
        }

        function renderCalendar() {
            const container = document.getElementById('calendarGrid');

            let html = '<table><thead><tr><th>Bedroom</th>';
            dates.forEach(date => {
                const d = new Date(date + 'T00:00:00');
                const day = d.getDate();
                const month = d.toLocaleDateString('en-US', { month: 'short' });
                html += `<th class="date-header">${month} ${day}</th>`;
            });
            html += '</tr></thead><tbody>';

            bedrooms.forEach(bedroom => {
                html += `<tr><td class="bedroom-label">${bedroom.name}</td>`;
                
                dates.forEach(date => {
                    const booking = bookings.find(b => 
                        b.bedroomId === bedroom.id &&
                        date >= b.checkIn &&
                        date < b.checkOut
                    );

                    if (booking) {
                        html += `<td class="booking-cell" onclick="deleteBooking('${booking.id}')" title="Click to delete: ${booking.guestName}">${booking.guestName.split(' ')[0]}</td>`;
                    } else {
                        html += `<td class="empty-cell">‚Äî</td>`;
                    }
                });
                
                html += '</tr>';
            });

            html += '</tbody></table>';
            container.innerHTML = html;
        }

        function renderBookingsList() {
            const container = document.getElementById('bookingsList');
            
            if (bookings.length === 0) {
                container.innerHTML = '<p class="info-text">No bookings yet</p>';
                return;
            }

            const sortedBookings = [...bookings].sort((a, b) => a.checkIn.localeCompare(b.checkIn));

            container.innerHTML = sortedBookings.map(booking => {
                const bedroom = bedrooms.find(b => b.id === booking.bedroomId);
                const checkInDate = new Date(booking.checkIn + 'T00:00:00').toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                const checkOutDate = new Date(booking.checkOut + 'T00:00:00').toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                
                return `
                    <div class="booking-item">
                        <div class="booking-info">
                            <h3>${booking.guestName}</h3>
                            <p><strong>Room:</strong> ${bedroom ? bedroom.name + ' - ' + bedroom.details : 'Unknown'}</p>
                            <p><strong>Dates:</strong> ${checkInDate} - ${checkOutDate}</p>
                        </div>
                        <button class="delete-booking-btn" onclick="deleteBooking('${booking.id}')">Delete</button>
                    </div>
                `;
            }).join('');
        }

        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.className = type;
            messageDiv.textContent = text;
            messageDiv.style.display = 'block';
            setTimeout(() => {
                messageDiv.style.display = 'none';
            }, 4000);
        }

        // Initialize on load
        init();
    </script>


</body></html>